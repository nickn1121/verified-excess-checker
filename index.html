<script>
  document.getElementById("check-btn").addEventListener("click", async function (e) {
    e.preventDefault();
    const input = document.getElementById("parts").value.trim();
    const resultBox = document.getElementById("result-box");

    if (!input) {
      resultBox.innerText = "‚ùå Please enter at least one part number.";
      resultBox.style.display = "block";
      return;
    }

    resultBox.innerText = "üîÑ Checking...";
    resultBox.style.display = "block";

    try {
      const response = await fetch("https://hook.eu2.make.com/wxau6uq0fmmqnv5uvyx5acfnsys65vxc", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ parts: input })
      });

      const rawText = await response.text();
      const lines = rawText.split('\n').map(line => line.trim());

      const filtered = [];
      let currentBlock = [];

      for (const line of lines) {
        if (line === "") {
          // End of one block
          if (currentBlock.length >= 2) {
            filtered.push(currentBlock.join("<br>"));
          }
          currentBlock = [];
        } else {
          currentBlock.push(line);
        }
      }

      // Add last block if valid
      if (currentBlock.length >= 2) {
        filtered.push(currentBlock.join("<br>"));
      }

      if (filtered.length === 0) {
        resultBox.innerHTML = "‚ùå No matching parts found.";
      } else {
        resultBox.innerHTML = filtered.join("<br><br>");
      }

    } catch (err) {
      resultBox.innerText = "‚ö†Ô∏è Something went wrong. Please try again later.";
      console.error(err);
    }
  });
</script>





